
###  ã€€ã€€ë™ì‹œì„± í•´ê²°ì˜ 3ê°€ì§€ í‚¤ì›Œë“œ


###### ã€€ã€€ :::::ã€€ syncronized , volatile , Atomic class

<br>

#####  ã€€ã€€1.1 syncronized

ã€€ã€€ê¼­ í•„ìš”í•œ ê³³ì— ê¼­ í•„ìš”í•œ ë§Œí¼ë§Œ ì ìš©í•´ì•¼ ì„±ëŠ¥ ì €í•˜ ì´ìŠˆë¥¼ ìµœëŒ€í•œ í”¼í•  ìˆ˜ ìˆë‹¤.
  
ã€€ã€€ìˆ˜ì •ì´ë‚˜ ìƒíƒœë³€ê²½ì—ë§Œ ê±¸ê³ , ì½ëŠ” ì‘ì—…ì€ ë™ê¸°í™”í•˜ì§€ì•ŠëŠ”ë‹¤.
  
ã€€ã€€ì „ìš© ë½ ê°ì²´ë¥¼ ì‚¬ìš©í•´ ì„¸ë°€í•˜ê²Œ ê´€ë¦¬í•œë‹¤.
  
ã€€ã€€ì¢€ ë” ì„¸ë°€í•˜ê²Œ ë™ê¸°í™”ë¥¼ ì œì–´í•˜ê³ ì‹¶ë‹¤ë©´ ReentrantLock ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì (ì‹œê°„, ì¤‘ê°„ í•´ì œ, ì—¬ëŸ¬ ë½ ì‚¬ìš©)

<br>  

#####  ã€€ã€€1.2 syncronized ì˜ˆì œ

<br>

###### ã€€ã€€ :::::ã€€ syncronized ì „ìš© ë½ ê°ì²´ ì‚¬ìš©í•˜ê¸°ã€€::::: 

<br>

ğŸ‘  this ë¡œ lock ê±¸ê¸°
```JAVA
synchronized(this) {
    SystemManager sm = smMap.get(systemId);

    if (sm == null) {
        isSuccess = false;
    } else {
        sm.terminate();
        smMap.remove(systemId);
    }
}
```
ğŸ‘ lock ê°ì²´ë¡œ lock ê±¸ê¸°
```JAVA
private final Object lock = new Object();  // ì „ìš© ë½ ê°ì²´

public boolean terminateSystem(String systemId) {
    synchronized(lock) {  // ì „ìš© ë½ ê°ì²´ë¡œ ë™ê¸°í™” ë²”ìœ„ ìµœì†Œí™”
        SystemManager sm = smMap.get(systemId);
             
        if (sm == null) {
            return false;  
        }
        sm.terminate();
        smMap.remove(systemId); 
        return true; 
    }
}
```
<br>

> this ë½ì€ ê°ì²´ ìì²´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë™ê¸°í™”í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ê°ì²´ì˜ ëª¨ë“  ë™ê¸°í™” ì‘ì—…ì´ ë™ì¼í•œ ë½ì„ ê³µìœ <br>
> í•´ë‹¹ ë½ì´ ê±¸ë ¤ìˆëŠ” ì—¬ëŸ¬ê³³ ì¤‘ í•˜ë‚˜ë¼ë„ ë½ì´ ê±¸ë¦¬ë©´ ë‚˜ë¨¸ì§€ëŠ” ì „ë¶€ ì‘ì—…ëŒ€ê¸°<br>
> í•´ë‹¹ ê³¼ì •ì—ì„œ ë½ê²½í•©ìœ¼ë¡œ ë³‘ëª©í˜„ìƒ ë°œìƒ ê°€ëŠ¥ì„±ì´ ë†’ì•„ì§<br>

<br>

> ì „ìš© lock ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ë™ê¸°í™”í•  ë²”ìœ„ë¥¼ íŠ¹ì •í•œ ì½”ë“œ ë¸”ë¡ìœ¼ë¡œ í•œì • (thisì™€ ê°™ì€ ì¼ì´ ì•ˆë²Œì–´ì§)<br>
> ì—¬ëŸ¬ ë©”ì†Œë“œê°€ ì„œë¡œ ë‹¤ë¥¸ ë½ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´, ê° ë©”ì†Œë“œì—ì„œ ë™ê¸°í™”ê°€ ì„œë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê²Œ ë¨<br>




<br>

###### ã€€ã€€ :::::ã€€ lock ë²”ìœ„ ìµœì†Œí™”ã€€::::: 

<br>

ğŸ‘  ì „ì²´ ë©”ì†Œë“œ ë™ê¸°í™”

```JAVA
public class Counter {
    private int count = 0;

    public synchronized void increase() {
        // synchronizedë¡œ ì „ì²´ ë©”ì†Œë“œê°€ ì ê¸ˆë¨
        count++;
    }

    public synchronized void decrease() {
        count--;
    }

    public int getCount() {
        return count;
    }
}
```

ğŸ‘ ë™ê¸°í™” ë²”ìœ„ ìµœì†Œí™” ë° ì „ìš© ë½ ê°ì²´ ì‚¬ìš©

```JAVA
public class Counter {
    private int count = 0;

    // ì „ìš© ë½ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ê¸°í™”
    private final Object lock = new Object();

    public void increase() {
        synchronized(lock) {
            count++;
        }
    }

    public void decrease() {
        synchronized(lock) {
            count--;
        }
    }

    public int getCount() {
        return count;
    }
}
```
<br>

> ë½ì„ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ëŠ” ì½”ë“œê¹Œì§€ ë™ê¸°í™”í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì„±ëŠ¥ ìµœì í™”ì˜ í•µì‹¬

<br>

###### ã€€ã€€ :::::ã€€ Deadlockã€€::::: 

<br>

ğŸ‘ ë°ë“œë½ (Deadlock)

```JAVA
synchronized(lock1) {
    synchronized(lock2) {
        // ....
    }
}
```

###### ã€€ã€€ :::::ã€€ í´ë˜ìŠ¤ ìˆ˜ì¤€ì—ì„œì˜ ë™ê¸°í™” - ì‹±ê¸€í†¤ ë³´ì¥ã€€::::: 

<br>

ğŸ‘ ì‹±ê¸€í†¤ (+ volatile )

```JAVA
private static Map<Long, Manager> smMap = new HashMap<>(); 

	private volatile static Manager uniqueInstance; 
	public static Manager getInstance() {
		if (uniqueInstance == null) {
			synchronized (rManager.class) {
				if (uniqueInstance == null) {
					uniqueInstance = new Manager();
				}
			}
		}		
		return uniqueInstance;
	}
```


<br>

#####  ã€€ã€€2. volatile

<br>

ğŸ‘ ìŠ¤ë ˆë“œ ê°„ ê³µìœ í•˜ëŠ” ìƒíƒœ ë³€ê²½ í”Œë˜ê·¸ë¡œ ì‚¬ìš©

```JAVA

```

<br>


#####  ã€€ã€€3. Atomic class

ë‹¤ìˆ˜ì˜ ìŠ¤ë ˆë“œê°€ ë™ì¼í•œ ë°ì´í„°ì— í•œë²ˆì— ì ‘ê·¼í•˜ëŠ” ë¹ˆë„ê°€ ë†’ì„ë•Œ,
ë‹¤ìˆ˜ì˜ ìŠ¤ë ˆë“œê°€ ë™ì¼í•œ ë°ì´í„°ë¡œ ì—°ì‚°í•˜ëŠ” ê²½ìš°ê°€ ë§ì„ ë•Œ
